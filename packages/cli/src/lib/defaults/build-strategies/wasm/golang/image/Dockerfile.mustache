FROM polywrap/vm-base-go:0.1.5

WORKDIR /project

COPY . .

RUN go mod tidy

RUN tinygo build -o main.wasm -target wasm-target ./module/wrap/main/main.go

# Make the build directory
RUN rm -rf ./build
RUN mkdir ./build

RUN wasm-snip ./main.wasm -o ./build/wrap.wasm -p fd_write clock_time_get args_sizes_get args_get
